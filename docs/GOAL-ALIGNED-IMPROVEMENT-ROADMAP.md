# 목표 달성을 위한 개선 로드맵 (순서형)

목표: 질문 입력 시 4개 서비스 동시 수집 → 오류 없이 비교/분석/요약 레포팅

---

## 1단계: Fail-Fast + minLength 동적화
**목표**: 응답 대기 시간 단축, 불필요한 재시도 제거  
**범위**: Perplexity/Gemini 수집 루프

**핵심 개선**
- 연속 null 후보 시 조기 종료
- 프롬프트 길이 기반 minLength 동적화

**기대 효과**
- 응답 대기 시간 30~50% 감소
- short_output 반복 감소

---

## 2단계: Dispatch 안정화(전송 실패 최소화)
**목표**: send_failed 감소, 초기 전송 성공률 개선  
**범위**: Perplexity/ChatGPT/Gemini/Claude 전송 검증 로직

**핵심 개선**
- Perplexity 전송 검증 기준 완화
- UI 상태 변화 검증 강화

**기대 효과**
- 재시도 횟수 감소
- 초기 전송 성공률 향상

---

## 3단계: Claude 정제 강화
**목표**: UI 잡음 제거, 결과 신뢰도 향상  
**범위**: Claude 수집/정제

**핵심 개선**
- 컨테이너 제한(assistant role)
- UI 키워드 필터 확장

**기대 효과**
- 잡음 섞임 현저히 감소
- 요약/분석 품질 상승

---

## 4단계: 동시 분석 락/큐
**목표**: 동시 요청 충돌 제거  
**범위**: 서버 실행 제어

**핵심 개선**
- 전역 락 (즉시 적용)  
- 필요 시 FIFO 큐 확장

**기대 효과**
- 요청 충돌 0%
- 안정적 병렬 처리 보장

---

## 5단계: Reasoning 캐시 TTL
**목표**: 오래된 전략 재사용 방지  
**범위**: Reasoning 캐시

**핵심 개선**
- TTL 기반 만료 처리

**기대 효과**
- 최신 컨텍스트 반영
- 일관된 전략 품질 유지

---

## 6단계: 리소스 블로킹 정책 세분화
**목표**: 로딩 안정성과 속도 균형 최적화  
**범위**: Playwright 네트워크 차단 정책

**핵심 개선**
- 서비스별 폰트 차단 예외
- 초기 로드 후 차단 전략

**기대 효과**
- UI 안정성 개선
- 불필요한 대기 감소

---

## 7단계: UX 한국어화
**목표**: UX 규칙 준수  
**범위**: 클라이언트 UI 문구

**핵심 개선**
- 영어 문구 전수 한국어화

**기대 효과**
- 언어 일관성 확보

---

## 완료 기준
- 4개 서비스 동시 수집 성공률 95% 이상  
- 평균 응답 대기 시간 30% 이상 단축  
- UI 잡음 혼입률 최소화  
- 분석 요약 품질 안정화

